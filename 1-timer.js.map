{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nconst startBtn = document.querySelector('button[data-start]');\nstartBtn.disabled = true;\nlet userSelectedDate = '';\nconsole.log(userSelectedDate);\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  dateFormat: 'Y-m-d H:i',\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0].getTime();\n    const now = Date.now();\n    startBtn.disabled = userSelectedDate <= now;\n    if (userSelectedDate < now) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        timeout: 4000,\n        position: 'topRight',\n        close: true,\n        backgroundColor: 'rgba(244,63,63,0.77)',\n        messageColor: 'white',\n        class: 'my-toast',\n        rtl: true,\n      });\n    }\n  },\n};\n\nconst input = document.querySelector('#datetime-picker');\nflatpickr(input, options);\n\n//TODO === Convert milliseconds to object vs days, hours, minutes, seconds\nconst convertMs = ms => {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n};\n\nlet interval = null;\n\n//TODO === Btn listener 'click' => Start Interval\nstartBtn.addEventListener('click', () => {\n  if (interval) {\n    clearInterval(interval);\n  }\n  startBtn.disabled = true;\n  input.disabled = true;\n\n  //TODO === Clear interval if time left === 0 => update new value in HTML\n  function updateTimer() {\n    const currentTime = Date.now();\n    const timeDifference = userSelectedDate - currentTime;\n\n    //TODO === If interval ended => clear interval => show '00' => and success message\n    if (timeDifference <= 0) {\n      clearInterval(interval);\n      interval = null;\n      input.disabled = false;\n\n      ['days', 'hours', 'minutes', 'seconds'].forEach(key => {\n        const element = document.querySelector(`[data-${key}]`);\n        if (element) {\n          element.textContent = '00';\n        }\n      });\n      iziToast.success({\n        message: 'Countdown finished!',\n        timeout: 4000,\n        position: 'topRight',\n        close: true,\n        backgroundColor: 'rgba(82, 196, 26, 0.8)',\n        messageColor: 'white',\n      });\n      return;\n    }\n\n    const timeLeft = convertMs(timeDifference);\n\n    //TODO === Rewrite new value in HTML => using time left\n    Object.entries(timeLeft).forEach(([key, value]) => {\n      const element = document.querySelector(`[data-${key}]`);\n      if (element) {\n        element.textContent = String(value).padStart(2, '0');\n      }\n    });\n  }\n\n  updateTimer();\n\n  interval = setInterval(updateTimer, 1000);\n});\n"],"names":["startBtn","userSelectedDate","options","selectedDates","now","iziToast","input","flatpickr","convertMs","ms","days","hours","minutes","seconds","interval","updateTimer","currentTime","timeDifference","key","element","timeLeft","value"],"mappings":"2GAKA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EAC5DA,EAAS,SAAW,GACpB,IAAIC,EAAmB,GACvB,QAAQ,IAAIA,CAAgB,EAC5B,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,WAAY,YACZ,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAAE,QAAS,EAC7C,MAAMC,EAAM,KAAK,IAAK,EACtBJ,EAAS,SAAWC,GAAoBG,EACpCH,EAAmBG,GACrBC,EAAS,MAAM,CACb,QAAS,qCACT,QAAS,IACT,SAAU,WACV,MAAO,GACP,gBAAiB,uBACjB,aAAc,QACd,MAAO,WACP,IAAK,EACb,CAAO,CAEJ,CACH,EAEMC,EAAQ,SAAS,cAAc,kBAAkB,EACvDC,EAAUD,EAAOJ,CAAO,EAGxB,MAAMM,EAAYC,GAAM,CAOtB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAC1C,EAEA,IAAIC,EAAW,KAGfd,EAAS,iBAAiB,QAAS,IAAM,CACnCc,GACF,cAAcA,CAAQ,EAExBd,EAAS,SAAW,GACpBM,EAAM,SAAW,GAGjB,SAASS,GAAc,CACrB,MAAMC,EAAc,KAAK,IAAK,EACxBC,EAAiBhB,EAAmBe,EAG1C,GAAIC,GAAkB,EAAG,CACvB,cAAcH,CAAQ,EACtBA,EAAW,KACXR,EAAM,SAAW,GAEjB,CAAC,OAAQ,QAAS,UAAW,SAAS,EAAE,QAAQY,GAAO,CACrD,MAAMC,EAAU,SAAS,cAAc,SAASD,CAAG,GAAG,EAClDC,IACFA,EAAQ,YAAc,KAEhC,CAAO,EACDd,EAAS,QAAQ,CACf,QAAS,sBACT,QAAS,IACT,SAAU,WACV,MAAO,GACP,gBAAiB,yBACjB,aAAc,OACtB,CAAO,EACD,MACN,CAEI,MAAMe,EAAWZ,EAAUS,CAAc,EAGzC,OAAO,QAAQG,CAAQ,EAAE,QAAQ,CAAC,CAACF,EAAKG,CAAK,IAAM,CACjD,MAAMF,EAAU,SAAS,cAAc,SAASD,CAAG,GAAG,EAClDC,IACFA,EAAQ,YAAc,OAAOE,CAAK,EAAE,SAAS,EAAG,GAAG,EAE3D,CAAK,CACL,CAEEN,EAAa,EAEbD,EAAW,YAAYC,EAAa,GAAI,CAC1C,CAAC"}